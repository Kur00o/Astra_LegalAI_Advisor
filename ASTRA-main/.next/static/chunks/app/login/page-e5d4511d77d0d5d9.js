(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>c});var s=r(5155),a=r(2115),i=r(9708),n=r(2085),l=r(9434);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:d=!1,onPress:o,isDisabled:u,onFocusChange:f,...m}=e,p=d?i.DX:"button";return(0,s.jsx)(p,{className:(0,l.cn)(c({variant:a,size:n,className:r})),ref:t,onClick:o,disabled:u,...m})});d.displayName="Button"},988:(e,t,r)=>{"use strict";r.d(t,{F1:()=>n,J6:()=>c,QL:()=>o,QM:()=>u,cK:()=>l,cL:()=>d});var s=r(5317),a=r(858),i=r(6104);let n=async e=>{let t=(0,s.H9)(i.db,"users",e.uid),r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL};(await (0,s.x7)(t)).exists()||(r.createdAt=(0,s.O5)()),await (0,s.BN)(t,r,{merge:!0})},l=async(e,t)=>{let r=i.j.currentUser;if(!r)throw Error("User not authenticated");return await n(r),(await (0,s.gS)((0,s.rJ)(i.db,"conversations"),{userId:r.uid,title:e,createdAt:(0,s.O5)(),messages:[{sender:"user",content:t.content,fileUrl:t.fileUrl||null,fileName:t.fileName||null,timestamp:(0,s.O5)()}]})).id},c=async(e,t,r,a,n)=>{let l=(0,s.H9)(i.db,"conversations",e),c=await (0,s.x7)(l);if(c.exists()){let e=c.data().messages||[],i={sender:t,content:r,fileUrl:a||null,fileName:n||null,timestamp:(0,s.O5)()};await (0,s.mZ)(l,{messages:[...e,i]})}else console.error("Conversation not found")},d=async()=>{let e=i.j.currentUser;if(!e)throw Error("User not authenticated");let t=(0,s.P)((0,s.rJ)(i.db,"conversations"),(0,s._M)("userId","==",e.uid)),r=await (0,s.GG)(t),a=[];return r.forEach(e=>{a.push({id:e.id,...e.data()})}),a},o=async e=>{let t=(0,s.H9)(i.db,"conversations",e),r=await (0,s.x7)(t);return r.exists()?{id:r.id,...r.data()}:null},u=async e=>{let t=i.j.currentUser;if(!t)throw Error("User not authenticated");await n(t);let r=(0,a.KR)(i.I,"users/".concat(t.uid,"/uploads/").concat(e.name));return await (0,a.D)(r,e),await (0,a.qk)(r)}},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(5155),a=r(2115),i=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},4637:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155),a=r(9434);let i=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300.000000 171.000000",preserveAspectRatio:"xMidYMid meet",role:"img","aria-labelledby":"title desc",...e,children:[(0,s.jsx)("title",{id:"title",children:"Greek pillar icon"}),(0,s.jsx)("desc",{id:"desc",children:"Minimal Greek pillar / column with capital, fluted shaft, and base"}),(0,s.jsxs)("g",{transform:"translate(0.000000,171.000000) scale(0.100000,-0.100000)",fill:"currentColor",stroke:"none",children:[(0,s.jsx)("path",{d:"M670 1065 c0 -13 29 -15 200 -15 171 0 200 2 200 15 0 13 -29 15 -200 15 -171 0 -200 -2 -200 -15z"}),(0,s.jsx)("path",{d:"M642 1007 c-27 -28 -28 -68 -4 -90 22 -20 63 -22 80 -5 15 15 15 51 0 66 -21 21 -30 13 -23 -19 6 -28 5 -30 -16 -27 -27 3 -37 32 -19 53 18 22 402 22 420 0 18 -21 8 -50 -19 -53 -21 -3 -22 -1 -16 28 5 24 4 31 -6 28 -46 -15 -30 -88 20 -88 59 0 83 66 38 108 -22 21 -32 22 -228 22 -202 0 -206 0 -227 -23z"}),(0,s.jsx)("path",{d:"M750 973 c0 -10 31 -13 120 -13 89 0 120 3 120 13 0 9 -31 12 -120 12 -89 0 -120 -3 -120 -12z"}),(0,s.jsx)("path",{d:"M1343 933 c-4 -10 -32 -75 -64 -145 -47 -105 -54 -128 -40 -128 10 0 24 15 34 35 l17 35 75 0 75 0 14 -35 c8 -19 22 -35 30 -35 9 0 16 3 16 8 0 4 -28 69 -62 145 -60 131 -81 158 -95 120z m55 -105 l31 -68 -64 0 -64 0 23 53 c12 28 26 61 30 71 8 23 6 26 44 -56z"}),(0,s.jsx)("path",{d:"M1566 929 c-27 -21 -34 -56 -17 -87 5 -10 36 -30 69 -46 66 -31 82 -58 55 -88 -25 -27 -77 -23 -102 8 -20 26 -41 25 -41 -1 0 -26 51 -55 97 -55 33 0 50 6 68 25 46 45 27 98 -47 130 -77 34 -101 72 -59 95 30 15 55 12 79 -10 25 -23 42 -26 42 -6 0 23 -50 56 -85 56 -18 0 -44 -9 -59 -21z"}),(0,s.jsx)("path",{d:"M1740 928 c0 -14 9 -18 40 -18 l40 0 0 -125 c0 -104 2 -125 15 -125 13 0 15 21 15 128 l0 128 40 -4 c34 -3 40 -1 40 14 0 17 -9 19 -95 19 -84 0 -95 -2 -95 -17z"}),(0,s.jsx)("path",{d:"M1974 941 c-2 -2 -4 -67 -4 -143 0 -133 1 -138 21 -138 18 0 20 5 18 53 l-3 52 32 2 c29 1 37 -5 69 -53 23 -34 43 -54 55 -54 17 0 15 6 -16 49 -20 27 -36 52 -36 56 0 4 11 16 26 27 21 17 25 27 22 66 -4 62 -33 83 -117 85 -35 1 -65 0 -67 -2z m147 -52 c32 -51 -21 -108 -91 -97 -20 3 -22 9 -22 58 0 30 0 58 1 61 2 11 103 -8 112 -22z"}),(0,s.jsx)("path",{d:"M2308 903 c-11 -26 -40 -90 -64 -142 -24 -52 -44 -96 -44 -97 0 -2 9 -4 19 -4 13 0 23 11 31 35 l12 35 78 0 79 0 12 -35 c8 -22 20 -35 31 -35 10 0 18 1 18 3 0 16 -128 281 -138 285 -7 2 -21 -16 -34 -45z m62 -65 c14 -35 27 -66 28 -70 2 -5 -24 -8 -58 -8 -46 0 -61 3 -57 13 4 6 16 38 29 69 13 32 25 58 28 58 3 0 16 -28 30 -62z"}),(0,s.jsx)("path",{d:"M750 775 l0 -165 -25 0 c-16 0 -25 -6 -25 -15 0 -13 26 -15 170 -15 144 0 170 2 170 15 0 9 -9 15 -25 15 l-25 0 0 165 0 165 -120 0 -120 0 0 -165z m210 -15 l0 -150 -90 0 -90 0 0 150 0 150 90 0 90 0 0 -150z"}),(0,s.jsx)("path",{d:"M830 896 c-1 -3 -1 -66 -1 -138 -1 -105 2 -133 13 -133 18 0 19 266 1 273 -7 2 -13 1 -13 -2z"}),(0,s.jsx)("path",{d:"M890 759 c0 -108 3 -140 13 -137 8 3 13 42 15 135 2 110 0 132 -13 137 -13 5 -15 -13 -15 -135z"}),(0,s.jsx)("path",{d:"M670 545 c0 -13 29 -15 200 -15 171 0 200 2 200 15 0 13 -29 15 -200 15 -171 0 -200 -2 -200 -15z"})]})]});function n(e){let{className:t}=e;return(0,s.jsx)("div",{className:(0,a.cn)("flex items-center gap-2 text-primary",t),children:(0,s.jsx)(i,{className:"h-full w-auto text-current"})})}},5057:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(5155),a=r(2115),i=r(968),n=r(2085),l=r(9434);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,l.cn)(c(),r),...a})});d.displayName=i.b.displayName},6104:(e,t,r)=>{"use strict";r.d(t,{I:()=>f,db:()=>u,j:()=>o});var s=r(3915),a=r(3004),i=r(5317),n=r(858),l=r(7358);let c={apiKey:"AIzaSyBAMr0BnZr4L4KcZNphCIdFjSMon1GJagI",authDomain:"astra-b3592.firebaseapp.com",projectId:"astra-b3592",storageBucket:"astra-b3592.appspot.com",messagingSenderId:"954855225931",appId:"1:954855225931:web:724f79a1a1860951a52bce",measurementId:l.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,databaseURL:l.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL},d=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(c),o=(0,a.xI)(d),u=(0,i.aU)(d),f=(0,n.c7)(d)},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>l});var s=r(5155),a=r(2115),i=r(9434);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground",r),...a})});n.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},8722:(e,t,r)=>{Promise.resolve().then(r.bind(r,9690))},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(2596),a=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},9690:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(5155),a=r(2115),i=r(6874),n=r.n(i),l=r(285),c=r(6695),d=r(2523),o=r(5057),u=r(5695),f=r(4637),m=r(9637),p=r(1554),h=r(6104),x=r(988),g=r(3004);function v(){let e=(0,u.useRouter)(),[t,r]=(0,a.useState)(""),[i,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(null),[b,N]=(0,a.useState)(!1),y=async()=>{let t=new g.HF;try{let r=await (0,g.df)(h.j,t);await (0,x.F1)(r.user),e.push("/jurisdiction")}catch(e){console.error("Google sign-in error",e)}},C=()=>(window.recaptchaVerifier||(window.recaptchaVerifier=new g.kT(h.j,"recaptcha-container",{size:"invisible",callback:e=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired")}})),window.recaptchaVerifier),k=async()=>{let e=C();if(e)try{let r=await (0,g.ik)(h.j,t,e);w(r),N(!0)}catch(e){console.error("Phone sign-in error",e)}},M=async()=>{if(j)try{let t=await j.confirm(i);await (0,x.F1)(t.user),e.push("/jurisdiction")}catch(e){console.error("OTP confirmation error",e)}};return(0,s.jsxs)("div",{className:"flex min-h-screen items-center justify-center bg-secondary p-4",children:[(0,s.jsx)("div",{id:"recaptcha-container"}),(0,s.jsxs)(c.Zp,{className:"w-full max-w-md mx-auto shadow-lg",children:[(0,s.jsxs)(c.aR,{className:"text-center",children:[(0,s.jsx)(n(),{href:"/",className:"flex items-center justify-center mb-4",children:(0,s.jsx)(f.A,{className:"h-20"})}),(0,s.jsx)(c.ZB,{className:"font-serif text-2xl",children:"Create an Account or Sign In"}),(0,s.jsx)(c.BT,{children:"Choose your preferred method to continue."})]}),(0,s.jsx)(c.Wu,{className:"space-y-4",children:b?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("p",{className:"text-center text-sm",children:["Enter the code sent to ",t]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"otp",children:"Verification Code"}),(0,s.jsx)(d.p,{id:"otp",value:i,onChange:e=>v(e.target.value),placeholder:"- - - - - -"})]}),(0,s.jsx)(l.$,{className:"w-full",onClick:M,children:"Confirm Code"}),(0,s.jsx)(l.$,{variant:"link",className:"w-full text-sm",onClick:()=>N(!1),children:"Back to sign in methods"})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(l.$,{className:"w-full",onClick:y,children:[(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{clipPath:"url(#clip0_17_80)",children:(0,s.jsx)("path",{fill:"#4285F4",d:"M43.611 20.083H42V20H24V28H35.303C33.674 32.69 29.223 36 24 36C17.373 36 12 30.627 12 24C12 17.373 17.373 12 24 12C29.223 12 33.674 15.31 35.303 20H43.611C42.223 11.957 33.918 6 24 6C13.518 6 4.965 13.987 4.965 24C4.965 34.013 13.518 42 24 42C33.918 42 42.223 36.043 43.611 28H35.303V20.083Z"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_17_80",children:(0,s.jsx)("rect",{width:"48",height:"48",fill:"white"})})})]}),"Sign in with Google"]}),(0,s.jsxs)(l.$,{variant:"outline",className:"w-full",onClick:()=>{e.push("/login/email")},children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Sign in with Email"]}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsx)(o.J,{htmlFor:"phone",children:"Phone Number"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(d.p,{id:"phone",type:"tel",placeholder:"+1 123 456 7890",value:t,onChange:e=>r(e.target.value)}),(0,s.jsx)(l.$,{onClick:k,children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"relative pt-2",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("span",{className:"w-full border-t"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),(0,s.jsx)(l.$,{variant:"link",className:"w-full",onClick:()=>{e.push("/jurisdiction")},children:"Skip for now"})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,138,352,874,24,829,441,684,358],()=>t(8722)),_N_E=e.O()}]);