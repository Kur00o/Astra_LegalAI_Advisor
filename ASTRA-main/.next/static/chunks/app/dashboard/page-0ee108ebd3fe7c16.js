(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>o});var r=t(5155),a=t(2115),n=t(9708),l=t(2085),i=t(9434);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:l,asChild:c=!1,onPress:d,isDisabled:u,onFocusChange:m,...f}=e,x=c?n.DX:"button";return(0,r.jsx)(x,{className:(0,i.cn)(o({variant:a,size:l,className:t})),ref:s,onClick:d,disabled:u,...f})});c.displayName="Button"},792:(e,s,t)=>{"use strict";t.d(s,{j:()=>a});var r=t(4477);let a=(0,r.createServerReference)("40cf9d4cfda40c0ec778e15e13463e3f84b105d7b9",r.callServer,void 0,r.findSourceMapURL,"legalChatbot")},2291:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var r=t(5155),a=t(2115),n=t(1046),l=t(285),i=t(6695),o=t(4477);let c=(0,o.createServerReference)("40c9fb4713d50e1227aa27c1ff8b5b2c9703d7087b",o.callServer,void 0,o.findSourceMapURL,"analyzeLegalClauses");var d=t(792),u=t(7990),m=t(5074),f=t(848),x=t(799),h=t(5078),p=t(6923),v=t(172),g=t(3503),b=t(3672),j=t(6126),y=t(9434),N=t(3478),w=t(9556);let k=N.bL,R=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(N.q7,{ref:s,className:(0,y.cn)("border-b",t),...a})});R.displayName="AccordionItem";let C=a.forwardRef((e,s)=>{let{className:t,children:a,...n}=e;return(0,r.jsx)(N.Y9,{className:"flex",children:(0,r.jsxs)(N.l9,{ref:s,className:(0,y.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[a,(0,r.jsx)(w.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});C.displayName=N.l9.displayName;let A=a.forwardRef((e,s)=>{let{className:t,children:a,...n}=e;return(0,r.jsx)(N.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,r.jsx)("div",{className:(0,y.cn)("pb-4 pt-0",t),children:a})})});A.displayName=N.UC.displayName;var S=t(8539),L=t(6424),D=t(5695);function E(){let[e,s]=(0,a.useState)(""),[t,o]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[E,z]=(0,a.useState)(null),[F,T]=(0,a.useState)(null),[U,_]=(0,a.useState)(""),[M,$]=(0,a.useState)(!1),[P,B]=(0,a.useState)([{role:"assistant",content:"I'm here to help with questions about your document. Ask me anything!"}]),[I,V]=(0,a.useState)(["analysis"]),[Z,q]=(0,a.useState)(null),K=(0,D.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("jurisdiction");e?q(JSON.parse(e)):K.push("/jurisdiction")},[K]);let[O,W]=(0,a.useState)({left:66,right:34}),[H,Q]=(0,a.useState)(40),X=(0,a.useRef)(!1),Y=(0,a.useRef)(!1),J=(0,a.useRef)(null),G=(0,a.useRef)(null),ee=(0,a.useRef)(null),es=(0,a.useCallback)(e=>{let t=e[0];if(t)if("text/plain"===t.type||t.name.endsWith(".txt")){o(t.name);let e=new FileReader;e.onload=e=>{var t;let r=null==(t=e.target)?void 0:t.result;s(r),T(null),el(r)},e.onerror=()=>{T("Failed to read the file. Please try another file."),o(""),s("")},e.readAsText(t)}else T("Unsupported file type. Please upload a .txt file.")},[Z]),{getRootProps:et,getInputProps:er,isDragActive:ea,open:en}=(0,n.VB)({onDrop:es,noClick:!0,noKeyboard:!0,accept:{"text/plain":[".txt"]}}),el=async e=>{if(!e.trim())return void T("The document is empty.");if(!Z)return void T("Please select a jurisdiction first.");w(!0),T(null),z(null);try{let s=await c({documentText:e,jurisdiction:Z.name});z(s)}catch(e){T("An error occurred during analysis. Please try again."),console.error(e)}finally{w(!1)}},ei=async()=>{var e;let s=null==(e=window.getSelection())?void 0:e.toString().trim();s&&s.length>10&&(localStorage.setItem("deepSearchQuery",s),K.push("/dashboard/deep-search"))},eo=()=>{setTimeout(()=>{var e,s;let t=null==(s=ee.current)||null==(e=s.firstChild)?void 0:e.firstChild;t&&(t.scrollTop=t.scrollHeight)},100)},ec=async()=>{if(!U.trim()||!e.trim()||!Z)return;let s=[...P,{role:"user",content:U}];B(s),_(""),$(!0),eo();try{let t=await (0,d.j)({query:U,history:s.slice(0,-1),documentDataUri:"data:text/plain;base64,".concat(btoa(e)),jurisdiction:Z.name});B(e=>[...e,{role:"assistant",content:t.response}])}catch(e){console.error(e),B(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{$(!1),eo()}},ed=e=>{switch(e){case"low":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"high":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},eu=e=>{if(X.current&&J.current){let s=J.current.getBoundingClientRect(),t=(e.clientX-s.left)/s.width*100;t>25&&t<75&&W({left:t,right:100-t})}},em=()=>{X.current=!1,document.removeEventListener("mousemove",eu),document.removeEventListener("mouseup",em)},ef=e=>{if(Y.current&&G.current){let s=G.current.getBoundingClientRect(),t=(s.bottom-e.clientY)/s.height*100;t>20&&t<80&&Q(t)}},ex=()=>{Y.current=!1,document.removeEventListener("mousemove",ef),document.removeEventListener("mouseup",ex)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"flex items-center justify-between p-4 border-b bg-background",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold font-serif",children:"Document Workspace"}),(0,r.jsx)("div",{className:"flex items-center gap-4"})]}),(0,r.jsxs)("main",{ref:J,className:"flex-1 flex min-h-0 p-4 bg-secondary gap-1",children:[(0,r.jsx)("div",{style:{width:"".concat(O.left,"%")},children:(0,r.jsxs)(i.Zp,{className:"h-full flex flex-col min-h-0 shadow-sm",children:[(0,r.jsxs)(i.aR,{className:"flex-row items-center justify-between p-3 border-b",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 text-sm font-medium",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-primary"}),(0,r.jsx)("span",{children:t})]}):(0,r.jsx)("span",{className:"text-muted-foreground",children:"No document uploaded"})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(l.$,{variant:"ghost",size:"icon",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",children:(0,r.jsx)(f.A,{className:"h-5 w-5"})}),(0,r.jsx)("span",{className:"text-sm font-semibold px-2",children:"100%"}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",children:(0,r.jsx)(x.A,{className:"h-5 w-5"})}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{z(null),B([{role:"assistant",content:"I'm here to help with questions about your document. Ask me anything!"}])},children:(0,r.jsx)(h.A,{className:"h-5 w-5"})}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:en,children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4"})," New Document"]})]})]}),(0,r.jsx)(i.Wu,{className:"flex-1 p-2 mt-2 min-h-0",children:(0,r.jsx)(L.F,{className:"h-full",children:(0,r.jsxs)("div",{...et(),className:(0,y.cn)("h-full w-full rounded-lg",ea&&"border-primary border-dashed border-2 bg-primary/5"),children:[(0,r.jsx)("input",{...er()}),e?(0,r.jsx)("div",{onMouseUp:ei,className:"p-6 whitespace-pre-wrap text-sm leading-relaxed",children:e}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground p-8 min-h-[500px]",onClick:en,children:[(0,r.jsx)(p.A,{className:"h-16 w-16 mb-4 text-primary/50"}),(0,r.jsx)("h3",{className:"text-lg font-semibold font-serif",children:"Upload your document"}),(0,r.jsx)("p",{className:"text-sm",children:"Drag and drop a .txt file here or click to select a file."}),ea&&(0,r.jsx)("p",{className:"text-primary mt-2",children:"Drop the file to upload!"})]})]})})})]})}),(0,r.jsx)("div",{className:"w-2 cursor-col-resize bg-border hover:bg-primary transition-colors",onMouseDown:e=>{e.preventDefault(),X.current=!0,document.addEventListener("mousemove",eu),document.addEventListener("mouseup",em)}}),(0,r.jsxs)("div",{ref:G,style:{width:"".concat(O.right,"%")},className:"flex flex-col min-h-0",children:[(0,r.jsx)("div",{style:{height:"".concat(100-H,"%")},children:(0,r.jsx)(L.F,{className:"h-full",children:(0,r.jsxs)("div",{className:"p-4 pl-5",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 font-serif",children:"Document Tools"}),(0,r.jsx)(k,{type:"multiple",className:"w-full space-y-3",value:I,onValueChange:V,children:(0,r.jsx)(i.Zp,{className:"shadow-sm",children:(0,r.jsxs)(R,{value:"analysis",className:"border-none",children:[(0,r.jsx)(C,{className:"p-4 font-semibold text-base hover:no-underline",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.A,{className:"h-5 w-5"})," Document Analysis"]})}),(0,r.jsx)(A,{className:"px-4 pb-4",children:N&&!E?(0,r.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,r.jsx)(v.A,{className:"h-6 w-6 animate-spin text-primary"})}):E?(0,r.jsx)("div",{className:"space-y-3",children:E.clauseAnalysis.map((e,s)=>(0,r.jsxs)("div",{className:"p-3 border rounded-md bg-secondary",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm",children:"Clause Analysis"}),(0,r.jsxs)(j.E,{variant:"outline",className:(0,y.cn)("text-xs border font-medium",ed(e.riskLevel)),children:[e.riskLevel.charAt(0).toUpperCase()+e.riskLevel.slice(1)," Risk"]})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground italic mb-2",children:['"',e.clause,'"']}),(0,r.jsx)("p",{className:"text-xs",children:e.explanation})]},s))}):(0,r.jsx)("div",{className:"text-center text-muted-foreground text-sm p-4",children:(0,r.jsx)("p",{children:"Upload a document to analyze clauses for risks."})})})]})})})]})})}),(0,r.jsx)("div",{className:"h-2 cursor-row-resize bg-border hover:bg-primary transition-colors",onMouseDown:e=>{e.preventDefault(),Y.current=!0,document.addEventListener("mousemove",ef),document.addEventListener("mouseup",ex)}}),(0,r.jsx)("div",{style:{height:"".concat(H,"%")},className:"flex flex-col min-h-0",children:(0,r.jsxs)("div",{className:"p-4 pl-5 border-t flex-1 flex flex-col min-h-0",children:[(0,r.jsxs)("h3",{className:"text-base font-semibold mb-2 flex items-center gap-2 font-serif",children:[(0,r.jsx)(g.A,{className:"h-5 w-5"})," Document Assistant"]}),(0,r.jsxs)(i.Zp,{className:"p-3 shadow-sm flex flex-col flex-1 min-h-0",children:[(0,r.jsx)(L.F,{className:"flex-1 pr-2 -mr-2",ref:ee,children:(0,r.jsxs)("div",{className:"space-y-4",children:[P.map((e,s)=>(0,r.jsxs)("div",{className:(0,y.cn)("flex items-start gap-2","user"===e.role&&"justify-end"),children:["assistant"===e.role&&(0,r.jsx)(g.A,{className:"h-5 w-5 text-primary flex-shrink-0 mt-1"}),(0,r.jsx)("div",{className:(0,y.cn)("rounded-lg p-2 text-sm max-w-[90%]","user"===e.role?"bg-primary text-primary-foreground":"bg-secondary"),children:e.content})]},s)),M&&(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(g.A,{className:"h-5 w-5 text-primary flex-shrink-0 mt-1"}),(0,r.jsx)("div",{className:"rounded-lg p-2 text-sm bg-secondary flex items-center",children:(0,r.jsx)(v.A,{className:"h-4 w-4 animate-spin"})})]})]})}),(0,r.jsxs)("div",{className:"mt-2 relative",children:[(0,r.jsx)(S.T,{placeholder:"Ask about this document...",className:"bg-background pr-10 text-sm",rows:2,value:U,onChange:e=>_(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ec())}}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8",onClick:ec,disabled:!U.trim()||!e.trim()||M||!Z,children:(0,r.jsx)(b.A,{className:"h-4 w-4"})})]})]})]})})]})]})]})}},6126:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var r=t(5155);t(2115);var a=t(2085),n=t(9434);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:t}),s),...a})}},6424:(e,s,t)=>{"use strict";t.d(s,{F:()=>i});var r=t(5155),a=t(2115),n=t(9051),l=t(9434);let i=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(n.bL,{ref:s,className:(0,l.cn)("relative overflow-hidden",t),...i,children:[(0,r.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,r.jsx)(o,{}),(0,r.jsx)(n.OK,{})]})});i.displayName=n.bL.displayName;let o=a.forwardRef((e,s)=>{let{className:t,orientation:a="vertical",...i}=e;return(0,r.jsx)(n.VM,{ref:s,orientation:a,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,r.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=n.VM.displayName},6695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>i});var r=t(5155),a=t(2115),n=t(9434);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground",t),...a})});l.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},8249:(e,s,t)=>{Promise.resolve().then(t.bind(t,2291))},8539:(e,s,t)=>{"use strict";t.d(s,{T:()=>l});var r=t(5155),a=t(2115),n=t(9434);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...a})});l.displayName="Textarea"},9434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(2596),a=t(9688);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[352,83,507,51,855,74,441,684,358],()=>s(8249)),_N_E=e.O()}]);